(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{295:function(s,a,t){"use strict";t.r(a);var n=t(8),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"nginx安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx安装"}},[s._v("#")]),s._v(" Nginx安装")]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("下载Nginx包")])]),s._v(" "),a("p",[a("a",{attrs:{href:"http://nginx.org/en/download.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网下载地址"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("img",{attrs:{src:"https://minboo-blog-img.oss-cn-guangzhou.aliyuncs.com/img/image-20220910161044819.png",alt:"image-20220910161044819"}})]),s._v(" "),a("p",[s._v("使用FTP工具将文件上传到虚拟机中")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("解压Nginx包，并安装")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-zxvf")]),s._v("  nginx-1.23.1.tar.gz "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#解压到当前目录")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" nginx-1.23.1 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入解压后的文件夹")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#文件夹中的文件：auto     CHANGES.ru  configure  html     man     src CHANGES  conf        contrib    LICENSE  README")]),s._v("\n")])])]),a("p",[s._v("安装依赖库")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装C编译器")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" gcc\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装pcre库")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" pcre pcre-devel\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装zlib")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" zlib zlib-devel\n")])])]),a("p",[s._v("安装")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" nginx-1.23.1\n./configure "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--prefix")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#使用prefix选项指定安装的目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])])]),a("p",[s._v("启动")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/nginx/sbin\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 里面是一个nginx的可执行文件")]),s._v("\n\n./nginx "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动这个可执行")]),s._v("\n")])])]),a("p",[a("strong",[s._v("关于防火墙")])]),s._v(" "),a("p",[s._v("关闭防火墙")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl stop firewalld.service\n")])])]),a("p",[s._v("禁止防火墙开机启动")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl disable firewalld.service \n")])])]),a("p",[s._v("放行端口")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("firewall-cmd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--zone")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--permanent")]),s._v(" \n")])])]),a("p",[s._v("重启防火墙")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("firewall-cmd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--reload")]),s._v("\nsystemctl restart firewalld\n")])])]),a("p",[a("strong",[s._v("补充Nginx命令")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("./nginx "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" stop "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#快速停止")]),s._v("\n./nginx "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" quit "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#完成已接受的请求后，停止")]),s._v("\n./nginx "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" reload "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重新加载配置")]),s._v("\n./nginx "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#检查nginx配置是否正确")]),s._v("\n")])])]),a("p",[s._v("查看nginx状态")]),s._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("ps -ef|grep nginx\n")])])]),a("p",[s._v("启动时：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://hedaodao-1256075778.cos.ap-beijing.myqcloud.com/Nginx/image-20220501205303265.png",alt:"image-20220501205303265"}})]),s._v(" "),a("p",[s._v("停止时：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://hedaodao-1256075778.cos.ap-beijing.myqcloud.com/Nginx/image-20220501205333304.png",alt:"image-20220501205333304"}})])]),s._v(" "),a("li",[a("p",[s._v("注册系统服务")]),s._v(" "),a("p",[s._v("通过系统服务的方式启动nginx")]),s._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("vi /usr/lib/systemd/system/nginx.service\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Description")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("After")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("network.target remote-fs.target nss-lookup.target\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("forking\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PIDFile")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/logs/nginx.pid\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStartPre")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/sbin/nginx "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" /usr/local/nginx/conf/nginx.conf\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/sbin/nginx "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" /usr/local/nginx/conf/nginx.conf\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecReload")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/sbin/nginx "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" reload\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStop")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/sbin/nginx "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" stop\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecQuit")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/sbin/nginx "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" quit \n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PrivateTmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n   \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Install"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("   \n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WantedBy")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("multi-user.target  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 多用户")]),s._v("\n")])])]),a("p",[s._v("重新加载系统服务")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl daemon-reload\n")])])]),a("p",[s._v("启动服务")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl start nginx.service \n")])])]),a("p",[s._v("开机启动")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" nginx.service\n")])])]),a("p",[s._v("配置软链接，以便全局使用nginx命令：")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /usr/local/nginx/sbin/nginx /usr/sbin/nginx\n")])])])])])])]),s._v(" "),a("h2",{attrs:{id:"nginx-目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx-目录"}},[s._v("#")]),s._v(" Nginx 目录")]),s._v(" "),a("p",[s._v("进入Nginx的主目录我们可以看到这些文件夹")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nclient_body_temp  conf  fastcgi_temp  html  logs  proxy_temp  sbin  scgi_temp  uwsgi_temp\n")])])]),a("p",[s._v("其中这几个文件夹在刚安装后是没有的，主要用来存放运行过程中的临时文件")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("client_body_temp fastcgi_temp proxy_temp scgi_temp\n")])])]),a("p",[a("strong",[s._v("conf")]),s._v(" 用来存放配置文件相关")]),s._v(" "),a("p",[a("strong",[s._v("html")]),s._v(" 用来存放静态文件的默认目录 html、css等")]),s._v(" "),a("p",[a("strong",[s._v("sbin")]),s._v(" nginx的主程序")]),s._v(" "),a("p",[a("strong",[s._v("logs")]),s._v(" 文件夹用于存放日志信息")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tree /usr/local/nginx")]),s._v("\n/usr/local/nginx\n├── client_body_temp                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# POST 大文件暂存目录")]),s._v("\n├── conf                             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Nginx所有配置文件的目录")]),s._v("\n│   ├── fastcgi.conf                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# fastcgi相关参数的配置文件")]),s._v("\n│   ├── fastcgi.conf.default         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# fastcgi.conf的原始备份文件")]),s._v("\n│   ├── fastcgi_params               "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# fastcgi的参数文件")]),s._v("\n│   ├── fastcgi_params.default       \n│   ├── koi-utf\n│   ├── koi-win\n│   ├── mime.types                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 媒体类型")]),s._v("\n│   ├── mime.types.default\n│   ├── nginx.conf                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#这是Nginx默认的主配置文件，日常使用和修改的文件")]),s._v("\n│   ├── nginx.conf.default\n│   ├── scgi_params                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# scgi相关参数文件")]),s._v("\n│   ├── scgi_params.default  \n│   ├── uwsgi_params                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# uwsgi相关参数文件")]),s._v("\n│   ├── uwsgi_params.default\n│   └── win-utf\n├── fastcgi_temp                     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# fastcgi临时数据目录")]),s._v("\n├── html                             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Nginx默认站点目录")]),s._v("\n│   ├── 50x.html                     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 错误页面优雅替代显示文件，例如出现502错误时会调用此页面")]),s._v("\n│   └── index.html                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认的首页文件")]),s._v("\n├── logs                             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Nginx日志目录")]),s._v("\n│   ├── access.log                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 访问日志文件")]),s._v("\n│   ├── error.log                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 错误日志文件")]),s._v("\n│   └── nginx.pid                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pid文件，Nginx进程启动后，会把所有进程的ID号写到此文件")]),s._v("\n├── proxy_temp                       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 临时目录")]),s._v("\n├── sbin                             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Nginx 可执行文件目录")]),s._v("\n│   └── nginx                        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Nginx 二进制可执行程序")]),s._v("\n├── scgi_temp                        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 临时目录")]),s._v("\n└── uwsgi_temp                       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 临时目录")]),s._v("\n\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);